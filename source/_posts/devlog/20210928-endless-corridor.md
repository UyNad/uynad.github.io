---
title: 【持续更新中】Genji：无限回廊开发日记
date: 2021-09-28
categories: Devlog
tags: 
- 游戏开发
cover: /images/20210928-corridor.gif
toc: true
---

无限回廊关卡机制（基于FPS弹幕战斗demo）的开发过程记录。

<!--more-->

---

   <br/>

*施工中。反正网站也没人看，我就不扔drafts，直接推送了，尼嘻嘻。*

## 整体期望

制作一个3D东方like的玩法原型，战斗方面为关卡结合留出空间，关卡方面制作各种playground来测试想法。

<br/>

## 设计要点

### 战斗机制

#### 核心体验

主角一击必死。面对压倒性的攻击，通过反弹弹幕，利用敌人的攻击去击溃敌人。

#### 角色机制

设计目标：速度快，立体位移多，快速响应，提供近似跑酷的畅快体验。

3C规划：移动、跳跃、滑墙、反弹。

1. 移动：只有一种速度，无法跑步或缓行等。启动和停止加速度快。
2. 跳跃：二段跳，二段是基于一段跳的加速度，期望手感类似于天命2的二段跳。
3. 滑墙：在向前速度超过阈值时，可在离地时贴墙滑行。滑行期间初速度不断减少，直到离墙前滑行高度不变。
4. 反弹：由反弹区、枪口射线组成。反弹区在角色身前，枪口射线对准枪口位置。按下射击键后，反弹区内的所有弹幕从射线位置射出，飞行速度与【触发反弹时该弹幕与枪口射线出发点的距离】成正比。例：配置最大速度为10m/s，最小速度为5m/s；则触发反弹时，反弹区内在射线出发点上的弹幕飞行速度为10m/s，最远的弹幕速度为5m/s，中间弹幕根据距离比例计算出飞行速度。

为了合理限制反弹体验，会加入一个反弹槽，将其表现具现化在武器上。该槽随着时间上升，但擦弹（距离弹幕较近）时可主动补充，以此鼓励玩家持续留在危险区。

<br/>

#### 敌人机制

<br/>

<br/>

#### 角色X敌人

<br/>

<br/>

#### 战斗X关卡

<br/>

<br/>

### 回廊关卡

尚未整理成文档，以下为聊天记录摘抄。

#### 流程概要

> 无限回廊是个boss beat
> 玩家从安全屋进入，可以补给；然后进回廊，走一截触发即时演出动画，BOSS攻击，然后开始无限回廊
> 回廊有70%概率生成直的，15%概率向左或向右；每截回廊长度35米，FPS主角要走6秒左右；
> BOSS每隔2~3秒放一波弹幕，因此一次循环里，玩家要与BOSS立回起码两次（因此每截走廊都有2排掩体）
>
> BOSS P1血没了后，会推到后面的房间里；玩家进去，这时候可以进入P2舞台
> 功能上就直接传送，然后删除原本生成的一大堆无限走P2 BOSS战结束后，这个地图会恢复 安全屋→一段走廊→P2舞台 的结构

<br/>

#### 设计QA

>1、回廊概率生成的目的和必要性是？
>2、玩家、BOSS是不是会自动跑，如果一方不是自动跑的话，双方距离怎么做限制？说体验就好，大把作假手段；
>3、核心玩法目的是？

> 1.1 一直是直的非常丑，回头看特别明显
> 1.2 拐弯的其实直线距离比直的长，因为是方块+直线的构成，方块时间如果没有补给规划，那就是纯看场景，所以概率比直线的低
> 1.3 我想在这个方块里做点场景叙事，主要靠场景摆设组成连环画，因为目前还没剧情所以也没画
>
> 2.1 玩家不会自动跑，爱跑不跑，一直呆在一个走廊里都可以
> 2.2 BOSS闪现，闪现到视频里尽头的那个聚光灯的地方，BOSS只出现在这里
>
> 3.1 之前其实就有提到核心的战斗设计 但你可能已经忘了
> 3.2 子弹是会反弹的 狭窄位置的战斗会非常白热化，因此才专门出现一个走廊BOSS
> 3.3 走廊BOSS的P1由两种子弹构成 1.大面积的可反弹projectile 2.不可反弹的laser 其中laser必须靠掩体躲避；玩家要通过掩体消除laser的攻击，然后反弹projectile

<br/>



## 开发日记



 {% img "box px-0 py-0 ml-auto mr-auto" /images/20210928-endless-corridor/shit.png 700 '"shit" "shit级生成逻辑，已经在重构了，重构完会记录下功能思路"' %}

 <br/>

